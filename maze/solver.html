<html>

<body>
  <tt id=p>
  <script>

    S = 12                // maze size
    c =                   // current position
    A = S * (S - 1) / 2;  // start position = maze center
    B = S + 2;            // end

    for (
      z = [
        i = S * (S-1)
      ];
      i--;
    ) z[i] =              // set cell content
      i % S               // if it not matches the width
      ? 5                 // to 5 = a wall
      // TODO: how about 6 here?
      : -1;               // otherwise -1 = a new line


    X = d => (
      D = [S, 1, -S, -1]  // direction
    ).map(
      (f, g, h) => 1 < z[
        f = d + 2 * h[
          3 & g + i
        ]
      ] && (
        z[f] = z[(d + f) / 2] = 0,
        i = Math.random() * 9,
        X(f)
      )
    ), X(S + 2)

    F = 0; // set "solved" flag to false

    setInterval(_=>{

      c == B ?            // if mouse found the exit
        F =               // set flag to "solved" and
        c = A             // move mouse to start position
      : F || (            // if not solved ...
        z[c] = (          // update direction slot
          (z[c] + 1) % 4  // turn by 90 degree
        )
      )

      z[                  // check neighbour
        n = // next       // get a new potentional position
        c +               // based on current position
        D[                // with a x or y offset
          z[c]            // off the direction index
        ]
      ] < 5 && (          // but only if there is no border ...
        c = n             // move mouse to that new position
      )

      F || (              // if maze has not yet been soved
        Z = z.slice``     // create a copy to render
      )

      Z[c] = 4            // highlight mouse

      p.innerText =       // render array
        Z.map(i =>        // map numbers to characters
          "    +X"[i] ||  // "X" = wall, "+" = mouse, "\n"
`
`
        )
    }, 0);

    </script>
</body>
</html>
